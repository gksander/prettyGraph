"use strict";JXG.Options.layer={numlayers:20,text:9,point:9,glider:9,arc:8,line:9,circle:6,curve:7,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:7,ticks:2,grid:1,image:0,trace:0},JXG.Options.text.fontSize=20;var app=new Vue({el:"#app",data:{sidebarShown:!1,currentTab:0,modalHead:"",modalBody:"",board:null,tmp:{},parser:math.parser(),constructions:localStorage.PGconstructions?JSON.parse(localStorage.PGconstructions):[],CC:null,currEl:null,nInterval:null,nOptions:!1,elementTypes:[["none","Choose one..."],["functiongraph","Function Graph"],["curve","Curve"],["text","Text"],["point","Point"],["line","Line"],["circle","Circle"],["polygon","Polygon"]],elementTypeSelected:"none",newElementId:""},methods:{constructionDefaults:function(c){return{name:c.name!==undefined?c.name:"Need a name",els:c.els!==undefined?c.els:[],declarations:c.declarations!==undefined?c.declarations:"",graphSize:c.graphSize!==undefined?c.graphSize:[500,500],graphBounds:c.graphBounds!==undefined?c.graphBounds:[-5,5,-5,5],fontSize:c.fontSize!==undefined?c.fontSize:22,axesColor:c.axesColor!==undefined?c.axesColor:"black",axesThickness:c.axesThickness!==undefined?c.axesThickness:2,axisLabel:c.axisLabel!==undefined?c.axisLabel:["$x$","$y$"],ticksDistance:c.ticksDistance!==undefined?c.ticksDistance:[1,1],minorTicks:c.minorTicks!==undefined?c.minorTicks:[1,1],showXAxis:c.showXAxis!==undefined?c.showXAxis:1,showYAxis:c.showYAxis!==undefined?c.showYAxis:1,piTicks:c.piTicks!==undefined?c.piTicks:0,n:c.n!==undefined?c.n:1,nBounds:c.nBounds!==undefined?c.nBounds:[-5,5,.1,5]}},initBoard:function(){try{this.runDeclarations(this.CC.declarations),JXG.JSXGraph.freeBoard(this.board),document.getElementById("box").innerHTML=""}catch(err){}var bounds=this.CC.graphBounds;this.board=JXG.JSXGraph.initBoard("box",{boundingBox:[bounds[0],bounds[3],bounds[1],bounds[2]],axis:!1,showCopyright:!1,pan:{enabled:!0,needshift:!1},zoom:{factorX:1.25,factorY:1.25,needshift:!0,wheel:!0},showNavigation:!1});var that=this;this.board.on("boundingbox",function(){var bounds=this.getBoundingBox(),xmin=bounds[0].toFixed(2),xmax=bounds[2].toFixed(2),ymin=bounds[3].toFixed(2),ymax=bounds[1].toFixed(2);that.CC.graphBounds=[xmin,xmax,ymin,ymax]}),this.board.on("update",function(){that.renderBoardMath()}),this.tmp.xaxis=this.board.create("axis",[[0,0],[1,0]],{strokeColor:this.CC.axesColor?this.CC.axesColor:"black",strokeWidth:this.CC.axesThickness?this.CC.axesThickness:2,highlight:!1,name:this.stringToDisplay(this.CC.axisLabel[0]),withLabel:!0,label:{position:"rt",offset:[5,10],highlight:!1,anchorX:"right",anchorY:"bottom",fontSize:this.CC.fontSize,parse:!1}}),this.tmp.xaxis.removeAllTicks(),this.tmp.xAxisTicks=this.board.create("ticks",[this.tmp.xaxis],{ticksDistance:this.CC.ticksDistance[0],strokeColor:"rgba(150,150,150,0.85)",majorHeight:0==this.CC.showYAxis&&1==this.CC.showXAxis?15:-1,minorHeight:0==this.CC.showYAxis&&1==this.CC.showXAxis?10:-1,highlight:!1,drawLabels:!0,label:{offset:[0,-5],anchorY:"top",anchorX:"middle",highlight:!1,fontSize:this.CC.fontSize},minorTicks:this.CC.minorTicks[0],drawZero:0==this.CC.showYAxis&&1==this.CC.showXAxis,scale:this.CC.piTicks?Math.PI:1,scaleSymbol:this.CC.piTicks?"&pi;":""}),0===this.CC.showXAxis&&this.tmp.xaxis.setAttribute({visible:!1}),this.tmp.yaxis=this.board.create("axis",[[0,0],[0,1]],{strokeColor:this.CC.axesColor?this.CC.axesColor:"black",strokeWidth:this.CC.axesThickness?this.CC.axesThickness:2,highlight:!1,name:this.stringToDisplay(this.CC.axisLabel[1]),withLabel:!0,label:{position:"rt",offset:[10,5],highlight:!1,anchorX:"left",anchorY:"top",fontSize:this.CC.fontSize,parse:!1}}),this.tmp.yaxis.removeAllTicks(),this.tmp.yAxisTicks=this.board.create("ticks",[this.tmp.yaxis],{ticksDistance:this.CC.ticksDistance[1],strokeColor:"rgba(150,150,150,0.85)",majorHeight:-1,minorHeight:-1,highlight:!1,drawLabels:!0,label:{offset:[-5,0],anchorY:"middle",anchorX:"right",highlight:!1,fontSize:this.CC.fontSize},minorTicks:this.CC.minorTicks[1]}),0===this.CC.showYAxis&&this.tmp.yaxis.setAttribute({visible:!1}),this.board.resizeContainer(this.CC.graphSize[0],this.CC.graphSize[1]);for(var el in this.CC.els)this.buildBoardElement(this.CC.els[el]);this.currEl=this.CC.els[0]||null},addNewElement:function(){var type=this.elementTypeSelected;if("none"==type)return console.log("Whoops! It looks like you forgot to choose an element"),!1;var id=this.newElementId;id=""===id?Math.random().toString(36).substring(2,8):id,this.newElementId="",this.elementTypeSelected=this.elementTypes[0][0];var newEl={id:id,type:type,visible:1};switch(type){case"functiongraph":newEl.funcdef="x^2",newEl.lowerBound="",newEl.upperBound="",newEl.strokeWidth=3,newEl.strokeColor="black",newEl.dash=0;break;case"curve":newEl.x="2*cos(t)",newEl.y="2*sin(t)",newEl.lowerBound="0",newEl.upperBound="1",newEl.strokeWidth=3,newEl.strokeColor="red",newEl.dash=0;break;case"point":newEl.loc="(1, 2)",newEl.size=3,newEl.name="",newEl.color="black";break;case"line":newEl.startLoc="(0,0)",newEl.endLoc="(2*cos(1), 2*sin(1))",newEl.strokeWidth=3,newEl.strokeColor="black",newEl.dash=0,newEl.arrow=0,newEl.end=0;break;case"text":newEl.loc="(1, 1)",newEl.text="$\\Delta x$",newEl.fontSize=this.CC.fontSize,newEl.anchorX=0,newEl.anchorY=0,newEl.color="black";break;case"circle":newEl.loc="(0,0)",newEl.r=2,newEl.strokeWidth=3,newEl.strokeColor="black",newEl.fillColor="white",newEl.fillOpacity=0,newEl.dash=0;break;case"polygon":newEl.loc=["(1,1)","(xf, 1)","(0, yf)"],newEl.strokeWidth=2,newEl.strokeColor="black",newEl.fillColor="white",newEl.fillOpacity=0;break;case"inequality":newEl.line="",newEl.inverse=!1,newEl.fillColor="red",newEl.fillOpacity=.3}this.CC.els.unshift(newEl),this.buildBoardElement(newEl),this.currEl=this.CC.els[0]},buildBoardElement:function(ops){var _this=this,id=ops.id;try{this.board.removeObject(this.tmp[id])}catch(err){}var that=this,ats={};try{switch(ops.type){case"functiongraph":ats={fixed:!0,highlight:!1,strokeWidth:ops.strokeWidth?ops.strokeWidth:3,strokeColor:ops.strokeColor?ops.strokeColor:"black",dash:ops.dash?ops.dash:0},this.tmp[id]=this.board.create("functiongraph",[function(x){var s=_this.getMathScope();s.x=x;try{return math.eval(ops.funcdef,s)}catch(err){return 0}},ops.lowerBound?function(){try{return math.eval(ops.lowerBound,that.getMathScope())}catch(err){return that.getMathScope().xi}}:null,ops.upperBound?function(){try{return math.eval(ops.upperBound,that.getMathScope())}catch(err){return that.getMathScope().xf}}:null],ats);break;case"curve":this.tmp[id]=this.board.create("curve",[function(t){var s=that.getMathScope();s.t=t;try{return math.eval(ops.x,s)}catch(err){return 0}},function(t){var s=that.getMathScope();s.t=t;try{return math.eval(ops.y,s)}catch(err){return 0}},function(){try{return math.eval(ops.lowerBound,that.getMathScope())}catch(err){return 0}},function(){try{return math.eval(ops.upperBound,that.getMathScope())}catch(err){return 1}}],{fixed:!0,highlight:!1,strokeWidth:ops.strokeWidth,strokeColor:ops.strokeColor,dash:ops.dash});break;case"text":ats={highlight:!1,anchorX:-1==ops.anchorX?"right":0==ops.anchorX?"middle":"left",anchorY:-1==ops.anchorY?"top":0==ops.anchorY?"middle":"bottom",fontSize:ops.fontSize,color:ops.color,parse:!1};var textF=function(){return that.stringToDisplay(ops.text)},loc=this.pointToArray(ops.loc);-1==ops.loc.indexOf("n")&&-1==ops.loc.indexOf("x")?(this.tmp[id]=this.board.create("text",[math.eval(loc[0]),math.eval(loc[1]),textF],ats),this.tmp[id].on("drag",function(){var x=this.X(),y=this.Y(),loc="("+x+", "+y+")";that.getElById(id).loc=loc})):this.tmp[id]=this.board.create("text",[function(){try{return math.eval(loc[0],that.getMathScope())}catch(err){return 0}},function(){try{return math.eval(loc[1],that.getMathScope())}catch(err){return 0}},textF],ats);break;case"point":var loc=this.pointToArray(ops.loc);this.tmp[ops.id]=this.board.create("point",[function(){try{return math.eval(loc[0],that.getMathScope())}catch(err){return 0}},function(){try{return math.eval(loc[1],that.getMathScope())}catch(err){return 0}}],{fixed:!1,name:ops.name?ops.name:"",highlight:!1,color:ops.color?ops.color:"black",showInfobox:!1,size:ops.size?ops.size:3}),this.tmp[id].on("drag",function(){var x=this.X(),y=this.Y(),loc="("+x+", "+y+")";that.getElById(id).loc=loc});break;case"line":var s=this.pointToArray(ops.startLoc),e=this.pointToArray(ops.endLoc);this.tmp[id]=this.board.create("line",[function(){try{return[math.eval(s[0],that.getMathScope()),math.eval(s[1],that.getMathScope())]}catch(err){return[0,0]}},function(){try{return[math.eval(e[0],that.getMathScope()),math.eval(e[1],that.getMathScope())]}catch(err){return[1,1]}}],{fixed:!1,highlight:!1,strokeWidth:ops.strokeWidth?ops.strokeWidth:3,strokeColor:ops.strokeColor?ops.strokeColor:"black",dash:ops.dash?ops.dash:0,straightFirst:2==ops.end||3==ops.end,straightLast:1==ops.end||3==ops.end,firstArrow:2==ops.arrow||3==ops.arrow,lastArrow:1==ops.arrow||3==ops.arrow});break;case"circle":var s=this.pointToArray(ops.loc);this.tmp[id]=this.board.create("circle",[[function(){try{return math.eval(s[0],that.getMathScope())}catch(err){return 0}},function(){try{return math.eval(s[1],that.getMathScope())}catch(err){return 0}}],function(){try{return math.eval(ops.r,that.getMathScope())}catch(err){return 1}}],{fixed:!0,highlight:!1,strokeWidth:ops.strokeWidth,strokeColor:ops.strokeColor,fillColor:ops.fillColor,fillOpacity:ops.fillOpacity,dash:ops.dash});break;case"polygon":for(var ps=[],_loop=function(i){var p=ops.loc[i];p=that.pointToArray(p),ps.push(function(){try{return[math.eval(p[0],that.getMathScope()),math.eval(p[1],that.getMathScope())]}catch(err){return[0,0]}})},i=0;i<ops.loc.length;i++)_loop(i);this.tmp[id]=this.board.create("polygon",ps,{fixed:!0,highlight:!1,vertices:{visible:!1},borders:{fixed:!0,highlight:!1,strokeWidth:ops.strokeWidth,strokeColor:ops.strokeColor},fillColor:ops.fillColor,fillOpacity:ops.fillOpacity})}this.tmp[id].on("down",function(){var id=null;for(var i in that.tmp)if(that.tmp[i]===this){id=i;break}null!==id&&(that.currEl=that.getElById(id))}),this.renderBoardMath()}catch(err){}},runDeclarations:function(val){this.parser.clear(),this.CC.declarations=val;var decs=val.split("\n");for(var i in decs)try{this.parser.eval(decs[i])}catch(err){}this.board.update(),this.renderBoardMath()},stringToDisplay:function(text){var o=text,that=this;return o=o.replace(/\$\{[^{}]+\}\d/g,function(x){return math.eval(x.substring(2,x.length-2),that.getMathScope()).toFixed(x.charAt(x.length-1))}),o=o.replace(/`.*`/g,function(x){try{return("$"+math.parse(x.substring(1,x.length-1)).toTex({parentheses:"auto",implicit:!0})+"$").replace(/:=/g,"=")}catch(err){return x}})},renderBoardMath:function(){renderMathInElement(document.getElementById("box"),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}]})},getMathScope:function(){var bb=this.board.getBoundingBox(),o={n:this.CC.n,xi:bb[0],xf:bb[2],yi:bb[3],yf:bb[1]},parserObj=this.parser.getAll();for(var p in parserObj)o[p]===undefined&&(o[p]=parserObj[p]);return o},getElById:function(id){var theEl=null;for(var i in this.CC.els)if(this.CC.els[i].id==id){theEl=this.CC.els[i];break}return theEl},pointToArray:function(point){var o=point.trim();return o=o.substr(1),o=o.substring(0,o.length-1),o.split(",")}},filters:{number:function(value){return value.toFixed(3)}},created:function(){try{0==this.constructions.length?this.constructions.push(this.constructionDefaults({})):this.constructions[0]=this.constructionDefaults(this.constructions[0]),this.CC=this.constructions[0]}catch(err){this.constructions=[this.constructionDefaults({})],this.CC=this.constructions[0]}},mounted:function(){this.initBoard()}});app.graphSizeChange=function(w,h){var x=300,y=300;try{x=math.eval(w),y=math.eval(h)}catch(err){}this.CC.graphSize=[x,y],this.board.resizeContainer(x,y)},app.graphBoundsChange=function(val,n){try{var v=math.eval(val);this.CC.graphBounds[n]=v,this.board.setBoundingBox([this.CC.graphBounds[0],this.CC.graphBounds[3],this.CC.graphBounds[1],this.CC.graphBounds[2]])}catch(err){return!1}},app.changeTicksDistance=function(dx,xy){try{var dx=math.eval(dx);this.tmp[(0==xy?"x":"y")+"AxisTicks"].setAttribute({ticksDistance:dx}),this.CC.ticksDistance[xy]=dx}catch(err){}},app.changeMinorTicks=function(n,xy){try{var n=math.eval(n);this.tmp[(0==xy?"x":"y")+"AxisTicks"].setAttribute({minorTicks:n}),this.CC.minorTicks[xy]=n}catch(err){return!1}},app.changeAxisLabel=function(lab,xy){try{this.tmp[(0==xy?"x":"y")+"axis"].setAttribute({name:this.stringToDisplay(lab)}),this.CC.axisLabel[xy]=lab}catch(err){return!1}},app.changeAxesThickness=function(val){try{this.tmp.xaxis.setAttribute({strokeWidth:val}),this.tmp.yaxis.setAttribute({strokeWidth:val}),this.CC.axesThickness=val}catch(err){return!1}},app.changeAxesColor=function(val){try{this.tmp.xaxis.setAttribute({strokeColor:val}),this.tmp.yaxis.setAttribute({strokeColor:val}),this.CC.axesColor=val}catch(err){return!1}},app.fontSizeChange=function(val){try{var size=math.eval(val);this.tmp.xaxis.label.setAttribute({fontSize:size});var xatl=this.tmp.xAxisTicks.getAttribute("label");xatl.fontSize=size,this.tmp.xAxisTicks.setAttribute({label:xatl}),this.tmp.yaxis.label.setAttribute({fontSize:size});var yatl=this.tmp.yAxisTicks.getAttribute("label");yatl.fontSize=size,this.tmp.yAxisTicks.setAttribute({label:yatl}),this.CC.fontSize=size}catch(err){return!1}},app.changeAxisVisibility=function(v,xy2){try{var show=parseInt(v),xy=0==xy2?"x":"y";"x"==xy?this.CC.showXAxis=show:this.CC.showYAxis=show,this.tmp[xy+"axis"].setAttribute({visible:1==show}),this.tmp.xAxisTicks.setAttribute({drawZero:0==this.CC.showYAxis&&1==this.CC.showXAxis,majorHeight:0==this.CC.showYAxis&&1==this.CC.showXAxis?15:-1,minorHeight:0==this.CC.showYAxis&&1==this.CC.showXAxis?10:-1})}catch(err){return!1}},app.setN=function(val){this.CC.n=val,this.board.update()},app.changeN=function(val,o){this.CC.n=1==o?math.eval(val):parseFloat(val),this.board.update()},app.playN=function(){try{clearInterval(this.nInterval)}catch(err){}var min=this.CC.nBounds[0],max=this.CC.nBounds[1],step=this.CC.nBounds[2],dur=1e3*this.CC.nBounds[3];this.changeN(min,0);var that=this;this.nInterval=setInterval(function(){that.changeN(that.CC.n+step,0),that.CC.n>max-step&&(clearInterval(that.nInterval),that.changeN(max,0))},dur/((max-min)/step))},app.nOptionsToggle=function(){this.nOptions=!this.nOptions},app.changeNBounds=function(val,o){try{this.CC.nBounds[o]=math.eval(val)}catch(err){return!1}},app.modalMessage=function(head,body){this.modalHead=head,this.modalBody=body},app.changeFuncDef=function(val,id){var theEl=this.getElById(id);theEl.funcdef=val,this.board.removeObject(this.tmp[id]),this.buildBoardElement(theEl),this.board.update()},app.changeFuncBound=function(val,id,n){var theEl=this.getElById(id);theEl[0==n?"lowerBound":"upperBound"]=val,this.board.removeObject(this.tmp[id]),this.buildBoardElement(theEl),this.board.update()},app.changeCurveFunc=function(val,id,n){var theEl=this.getElById(id);theEl[0==n?"x":"y"]=val,this.board.removeObject(this.tmp[id]),this.buildBoardElement(theEl),this.board.update()},app.changeCurveBounds=function(val,id,n){var theEl=this.getElById(id);theEl[0==n?"lowerBound":"upperBound"]=val,this.board.removeObject(this.tmp[id]),this.buildBoardElement(theEl),this.board.update()},app.changeText=function(val,id,n){var theEl=this.getElById(id);0==n?(theEl.text=val,this.buildBoardElement(theEl)):(theEl.loc=val,this.buildBoardElement(theEl))},app.changePointLoc=function(val,id){var theEl=this.getElById(id);theEl.loc=val,this.buildBoardElement(theEl)},app.changeLineLoc=function(val,id,n){var theEl=this.getElById(id);theEl[(0==n?"start":"end")+"Loc"]=val,this.buildBoardElement(theEl)},app.changeCircle=function(val,id,n){var theEl=this.getElById(id);0==n?theEl.loc=val:theEl.r=val,this.buildBoardElement(theEl)},app.changePolygonPoint=function(val,id,i){var theEl=this.getElById(id);theEl.loc[i]=val,this.buildBoardElement(theEl)},app.addPolygonPoint=function(id){var theEl=this.getElById(id);theEl.loc.push("(0,0)"),this.buildBoardElement(theEl)},app.deletePolygonPoint=function(id,i){var theEl=this.getElById(id);theEl.loc.splice(i,1),this.buildBoardElement(theEl)},app.deleteItem=function(id,i){try{this.board.removeObject(this.tmp[id]),delete this.tmp[id],this.CC.els.splice(i,1)}catch(err){}},app.changeStyle=function(prop,val){switch(prop){case"size":this.currEl.size=val,this.tmp[this.currEl.id].setAttribute({size:val});break;case"name":this.currEl.name=val,this.tmp[this.currEl.id].setAttribute({name:val});break;case"color":this.currEl.color=val,this.tmp[this.currEl.id].setAttribute({color:val});break;case"strokeColor":this.currEl.strokeColor=val,this.tmp[this.currEl.id].setAttribute({strokeColor:val});break;case"strokeWidth":this.currEl.strokeWidth=val,this.tmp[this.currEl.id].setAttribute({strokeWidth:val});break;case"dash":this.currEl.dash=val,this.tmp[this.currEl.id].setAttribute({dash:val});break;case"arrow":this.currEl.arrow=val,this.tmp[this.currEl.id].setAttribute({firstArrow:2==val||3==val,lastArrow:1==val||3==val});break;case"end":this.currEl.end=val,this.tmp[this.currEl.id].setAttribute({straightFirst:2==val||3==val,straightLast:1==val||3==val});break;case"fillColor":this.currEl.fillColor=val,this.tmp[this.currEl.id].setAttribute({fillColor:val});break;case"fillOpacity":this.currEl.fillOpacity=val,this.tmp[this.currEl.id].setAttribute({fillOpacity:parseFloat(val)});break;case"fontSize":this.currEl.fontSize=val,this.tmp[this.currEl.id].setAttribute({fontSize:val});break;case"anchorX":this.currEl.anchorX=val,this.tmp[this.currEl.id].setAttribute({anchorX:-1==val?"right":0==val?"middle":"left"});break;case"anchorY":this.currEl.anchorY=val,this.tmp[this.currEl.id].setAttribute({anchorY:-1==val?"top":0==val?"middle":"bottom"});break;case"visible":this.currEl.visible=val,this.tmp[this.currEl.id].setAttribute({visible:0!=val})}},app.changeCurrEl=function(n){var i=this.CC.els.indexOf(this.currEl);if(-1==i||!this.CC.els[i+n])return!1;this.currEl=this.CC.els[i+n]},app.changeConstruction=function(val){try{-1==val?(this.constructions.push(this.constructionDefaults({})),this.CC=this.constructions[this.constructions.length-1]):this.CC=this.constructions[val],this.initBoard()}catch(err){console.log(err)}},app.saveConstructions=function(){try{localStorage.PGconstructions=JSON.stringify(this.constructions),console.log("saved")}catch(err){console.log("save failed")}},app.deleteConstruction=function(){var i=this.constructions.indexOf(this.CC);this.constructions.splice(i,1),0==this.constructions.length?(this.constructions.push(this.constructionDefaults({})),this.CC=this.constructions[0]):this.CC=0==i?this.constructions[0]:this.constructions[i-1],this.initBoard(),this.saveConstructions()};
//# sourceMappingURL=main-dist.js.map